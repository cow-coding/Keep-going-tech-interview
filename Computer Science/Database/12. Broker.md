# Broker

## 메시지 브로커 VS 이벤트 브로커

> 메시지 브로커

- 대규모 메시지 기반 **미들웨어** 아키텍처에서 사용되는 기술
- 메시지를 받아서 적절히 처리 후 메시지가 삭제됨
- 일반적으로 캐시 서버 역할로 사용할 때 많이 사용함
- **이벤트 브로커 역할을 할 수 없음**
- (-) 데이터 손실 위험이 있음
- 대표적인 예
  - Redis
  - RabbitMQ

> 이벤트 브로커

- 이벤트 또는 메시지라고 불리는 정보를 **하나만 보관**하고 **인덱스를 통해 개별 엑세스를 관리**
- 업무상 필요한 시간동안 이벤트 관리
- 메시지 브로커와 다르게 **이벤트를 삭제하지 않음**
- 서비스에서 발생하는 이벤트를 **이벤트 브로커 큐에 저장**
- (+) 딱 한번 일어난 이벤트 데이터를 브로커에 저장함으로써 모든 데이터 요소를 한 곳에서 제어 또는 편집하도록 조직하는 관례(**단일 진실 공급원**)에 맞게 동작
- (+) 장애 발생시 장애 지점부터 재처리 가능
- (+) 많은 양의 실시간 스트림 데이터를 효과적으로 관리 가능
- 대표적인 예
  - Kafka

## Redis와 비슷한 기술

> RabbitMQ

- 서비스 확장이 없다면, 소비자 중심 설계이므로 RabbitMQ가 적합함
- 장점
  - (+) 구성이 쉬움
  - (+) 복잡한 라우팅 지원
  - (+) 오래되었고, 안정성이 높음
  - (+) 20K/sec 정도의 속도를 보임
  - (+) 소비자 중심의 설계
- 단점
  - (-) 데이터 손실의 위험성
  - (-) 성능 문제가 있음

> Kafka

- 대규모 트래픽이 예상되고, 확장이 예상되면 Kafka가 적합
- 장점
  - (+) 구독 방식의 비동기식 구성
  - (+) 분산처리에 효과적
  - (+) 생산자 중심의 설계
  - (+) 이벤트 기반 MSA로 발전하는데 도움이 됨
  - (+) 100K/sec의 속도
